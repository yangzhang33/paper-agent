# LLM 评估新闻聚合器 - 项目总结

## 项目概述

这是一个自动化的 AI 新闻聚合平台，专注于大语言模型（LLM）评估相关的内容。系统每日自动抓取、总结并将内容转换为音频，为用户提供便捷的信息获取体验。

## 核心工作流程

### 🔄 自动化处理流程图

```
📚 内容抓取 → 🔍 相关性过滤 → 📝 中文摘要生成 → 🎵 中文语音合成 → ☁️ 存储上传 → 💾 数据库更新 → 🌐 前端展示
```

---

## 详细工作流程

### 1. 📚 内容抓取阶段

#### **目标**
从多个可靠来源获取最新的 AI 研究论文和新闻资讯。

#### **实现方式**
- **Arxiv 论文抓取** (`scripts/fetch_arxiv.ts`)
  - 使用 Arxiv API 抓取最新论文
  - 搜索关键词：`LLM evaluation`, `language model benchmarking`, `NLP evaluation` 等
  - 默认抓取 15 篇最新论文
  - 提取：标题、摘要、链接、发布日期、作者

- **新闻内容抓取** (`scripts/fetch_news.ts`)
  - 目标来源：Hugging Face Blog、The Decoder 等
  - 通过 RSS 或 API 获取最新文章
  - 默认抓取 10 条最新新闻
  - 提取：标题、描述、链接、发布时间

#### **技术栈**
- `axios` - HTTP 请求
- `xml2js` - XML 解析（Arxiv API）

---

### 2. 🔍 相关性过滤阶段

#### **目标**
从抓取的内容中筛选出与 LLM 评估高度相关的文章。

#### **实现方式**
- **关键词匹配算法**
  - 相关关键词库：`evaluation`, `benchmark`, `assessment`, `metric`, `performance`, `llm`, `language model` 等
  - 评分机制：内容至少包含 2 个相关关键词才被保留
  - 过滤逻辑在 `filterRelevantPapers()` 和 `filterRelevantNews()` 函数中实现

#### **过滤效果**
- 论文：从 15 篇筛选出 3-5 篇高度相关
- 新闻：从 10 条筛选出 2-3 条高度相关

---

### 3. 📝 中文摘要生成阶段

#### **目标**
将英文论文和新闻转换为简洁易懂的中文摘要。

#### **实现方式** (`scripts/summarize_with_deepseek.ts`)
- **AI 模型**：DeepSeek Chat API
- **语言处理**：英文→中文（自动翻译+摘要）
- **摘要策略**：
  ```
  系统提示：你是一个专业的AI研究摘要生成器。请将给定的内容总结为 N 句话以内的中文摘要
  
  重点关注：
  1. 核心研究内容和创新点
  2. 主要技术方法  
  3. 重要发现或结论
  4. 对LLM评估领域的意义
  ```

#### **摘要规格**
- **论文摘要**：5 句话以内，约 150-200 字
- **新闻摘要**：3 句话以内，约 100-150 字
- **语言**：纯中文输出
- **风格**：专业、简洁、易懂

#### **容错机制**
- API 失败时自动生成备用摘要
- 提取原文前几句作为后备方案

---

### 4. 🎵 中文语音合成阶段

#### **目标**
将中文摘要转换为高质量的中文音频。

#### **实现方式** (`scripts/tts_with_minimax.ts`)
- **TTS 服务**：MiniMax Text-to-Speech API
- **语音配置**：
  ```
  声音：female-tianmei-jingpin（中文女声-甜美精品）
  语速：1.0（正常语速）
  音量：1.0（标准音量） 
  格式：MP3，128kbps
  ```

#### **文本预处理**
- 移除特殊字符和格式标记
- 添加停顿标记优化朗读效果
- 限制文本长度（≤1000字符）

#### **音频规格**
- **输出语言**：标准普通话
- **音频格式**：MP3
- **预估时长**：30-60秒/条摘要
- **音质**：128kbps，适合在线播放

#### **容错处理**
- API 失败时尝试简化版本
- 批量处理避免频率限制

---

### 5. ☁️ 存储上传阶段

#### **目标**
将生成的音频文件安全存储到云端。

#### **实现方式** (`scripts/upload_blob.ts`)
- **存储服务**：Vercel Blob Storage
- **文件命名**：`audio/{timestamp}-{title}_{id}.mp3`
- **访问权限**：公开访问（用于前端播放）

#### **上传流程**
1. 验证音频文件完整性
2. 生成唯一文件名
3. 上传到 Vercel Blob
4. 获取公开访问 URL

---

### 6. 💾 数据库更新阶段

#### **目标**
将所有处理后的数据持久化存储。

#### **实现方式** (`scripts/update_supabase.ts`)
- **数据库**：Supabase PostgreSQL
- **表结构**：
  ```sql
  news_items:
  - id (主键)
  - title (标题)
  - summary (中文摘要)  
  - link (原文链接)
  - audio_url (音频链接)
  - source ('arxiv' | 'news')
  - published_date (发布时间)
  - created_at (创建时间)
  ```

#### **数据处理**
- 去重检查（基于 link 字段）
- 数据完整性验证
- 批量插入优化

---

### 7. 🌐 前端展示阶段

#### **目标**
为用户提供美观易用的内容浏览和音频播放界面。

#### **实现方式** (`app/page.tsx`)
- **框架**：Next.js 14 + React
- **样式**：Tailwind CSS
- **功能特性**：
  - 📊 实时统计展示
  - 🔍 按来源过滤（全部/论文/新闻）
  - 🎵 内置音频播放器
  - 📱 响应式设计
  - 🔗 原文链接跳转

#### **用户体验**
- 加载状态提示
- 音频播放控制
- 错误处理和重试
- 移动端适配

---

## 语言处理详情

### 📝 摘要生成策略

#### **输入处理**
- **英文论文**：直接使用英文标题和摘要
- **英文新闻**：使用英文标题和描述
- **多语言内容**：统一按英文处理

#### **翻译+摘要一体化**
```
原始流程：英文内容 → DeepSeek API → 中文摘要
无独立翻译步骤，AI 模型同时完成翻译和摘要任务
```

#### **摘要质量控制**
- 专业术语准确翻译
- 保持技术内容的准确性
- 适合中文阅读习惯
- 突出关键信息点

### 🎵 语音输出规格

#### **语言配置**
- **输出语言**：简体中文（普通话）
- **声音特征**：女声、甜美、清晰
- **语速控制**：标准语速（1.0倍速）

#### **音频质量**
- **采样率**：标准音频质量
- **比特率**：128kbps
- **格式**：MP3（兼容性最佳）
- **时长**：通常 30-60 秒

---

## 自动化调度

### ⏰ 定时任务配置

#### **执行频率**
- **生产环境**：每日上午 8:00 自动执行
- **Cron 表达式**：`0 8 * * *`
- **时区**：UTC（需要根据目标时区调整）

#### **任务内容**
1. 抓取最新内容（5分钟）
2. 生成摘要（10分钟）
3. 语音合成（15分钟）
4. 存储和更新（5分钟）
5. 总耗时：约 35 分钟

#### **资源控制**
- **论文处理**：最多 5 篇/天
- **新闻处理**：最多 3 条/天
- **API 调用**：控制在预算范围内

---

## 技术架构总结

### 🛠 核心技术栈
- **前端**：Next.js 14、React、TypeScript、Tailwind CSS
- **后端**：Vercel Serverless Functions
- **数据库**：Supabase (PostgreSQL)
- **存储**：Vercel Blob Storage
- **AI 服务**：DeepSeek API、MiniMax TTS
- **部署**：Vercel Platform

### 📊 数据流向
```
外部数据源 → 内容抓取 → 相关性过滤 → AI摘要 → TTS合成 → 云端存储 → 数据库 → 前端展示
```

### 🔒 安全考虑
- API 密钥环境变量保护
- Cron 任务访问控制
- 数据库行级安全策略
- 音频文件公开访问控制

---

## 项目优势

1. **全自动化**：无需人工干预的完整流程
2. **多语言支持**：英文输入→中文输出
3. **音频增强**：提供听觉内容消费方式
4. **实时更新**：每日自动获取最新资讯
5. **成本可控**：合理的 API 调用限制
6. **用户友好**：现代化的 Web 界面

## 扩展可能

- 🌍 支持更多语言的 TTS
- 📧 邮件订阅功能
- 🔔 个性化推送
- 📈 内容趋势分析
- 🎯 精准度算法优化 